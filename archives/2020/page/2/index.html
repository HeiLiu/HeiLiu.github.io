<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>文章归档：2020 - HeiLiu</title>
    <meta charset="UTF-8">
    <meta name="description" content="一直在路上的程序员">
    <meta name="keywords" content="博客 程序员 分享">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="一直在路上的程序员">
<meta property="og:type" content="website">
<meta property="og:title" content="HeiLiu">
<meta property="og:url" content="https://heiliu.github.io/archives/2020/page/2/">
<meta property="og:site_name" content="HeiLiu">
<meta property="og:description" content="一直在路上的程序员">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="小别致真东西">
<meta property="article:tag" content="博客 程序员 分享">
<meta name="twitter:card" content="summary">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,npm/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css?v=233" crossorigin>
    <link rel="stylesheet" href="/css/style.css?v=1629897075419">
    
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1629897075419">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="小别致真东西" class="mdui-btn mdui-btn-icon"><img src="https://avatars1.githubusercontent.com/u/29034936?s=400&amp;u=568e2bb8e4bb03a573e9138e715699e492fbe399&amp;v=4" alt="小别致真东西"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="小别致真东西">
            <img src="https://avatars1.githubusercontent.com/u/29034936?s=400&amp;u=568e2bb8e4bb03a573e9138e715699e492fbe399&amp;v=4" alt="小别致真东西" alt="小别致真东西">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>75</div>
        <div><span>标签</span>24</div>
        <div><span>分类</span>18</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive/" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about/" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=969403750&website=www.oicqzone.com" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://space.bilibili.com/20238211" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/heiliu/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/Bar/" style="font-size: 10px;">Bar</a> <a href="/tags/E2E%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">E2E测试</a> <a href="/tags/Foo/" style="font-size: 12.5px;">Foo</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Next-js/" style="font-size: 10px;">Next.js</a> <a href="/tags/Note/" style="font-size: 15px;">Note</a> <a href="/tags/Quote/" style="font-size: 10px;">Quote</a> <a href="/tags/React/" style="font-size: 17.5px;">React</a> <a href="/tags/Skill/" style="font-size: 10px;">Skill</a> <a href="/tags/Test/" style="font-size: 10px;">Test</a> <a href="/tags/WebPack/" style="font-size: 10px;">WebPack</a> <a href="/tags/Yarn/" style="font-size: 10px;">Yarn</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/utils/" style="font-size: 12.5px;">utils</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 12.5px;">前端</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 10px;">性能优化</a> <a href="/tags/%E6%9C%89%E6%84%9F/" style="font-size: 10px;">有感</a> <a href="/tags/%E6%BC%94%E7%A4%BA%E6%A0%87%E7%AD%BE/" style="font-size: 10px;">演示标签</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 10px;">生活</a> <a href="/tags/%E8%A7%84%E5%88%92/" style="font-size: 10px;">规划</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 10px;">随笔</a>
    </div>
    
  </div>

    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Skill/Note/Git/">Git</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/NPM/">NPM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Node最佳实践/">Node最佳实践</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Skill/Note/">Note</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/React/">React</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Skill/">Skill</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Test/">Test</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/demo/">demo</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/前端/webPack/">webPack</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/倒腾/">倒腾</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/前端/">前端</a>
          <span class="category-list-count">9</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/有感/">有感</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/生活/">生活</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/笔记/">笔记</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2021 小别致真东西
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href="https://vercel.com/?utm_source=theme-nexmoe&amp;utm_campaign=oss" title="Powered By Vercel" rel="nofollow noopener"><img src="https://camo.githubusercontent.com/37b009b52b3a9af7886f52e75cd76d1b32fef331ab1dc2108089c0ced0b7635f/68747470733a2f2f7777772e6461746f636d732d6173736574732e636f6d2f33313034392f313631383938333239372d706f77657265642d62792d76657263656c2e737667" alt="Powered By Vercel" title="Powered By Vercel" data-canonical-src="https://www.datocms-assets.com/31049/1618983297-powered-by-vercel.svg" width="150px"></a><script data-ad-client="ca-pub-2058306854838448" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <section class="nexmoe-posts">
    
    <div class="nexmoe-post">
        <a href="/2020/07/23/JWT/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="JWT (Json Web Token) 入门笔记" class="lazyload">
                    <h1>JWT (Json Web Token) 入门笔记</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年07月23日</a>
            <a><i class="nexmoefont icon-areachart"></i>630 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 2 分钟</a>
        </div>

        <article>
            
                <p>JWT 兴起：RESTFUL 架构 + 前后端分离 + 微服务架构 （共享session问题、 session 复制问题）</p>
<p>Authorization：bearer <token></p>
<h2 id="JWT-定义"><a href="#JWT-定义" class="headerlink" title="JWT 定义"></a>JWT 定义</h2><blockquote>
<p>JSON Web Token (JWT)是一个开放标准(RFC 7519)，它定义了一种紧凑的、自包含的方式，用于作为JSON对象在各方之间安全地传输信息。该信息可以被验证和信任，因为它是数字签名的。</p>
</blockquote>
<p>JSON Web Token 由三部分组成，格式为： header.payload.signature<br><strong>示例</strong>：  </p>
<blockquote>
<p>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJPcGVuSUQiOiJvVVp3QTBlUXhyQ0hQaG9LdGtlUG9xRl91czBzIiwiU2Vzc2lvbktleSI6IlhUMG81MzJnckJHNmdmcTB4Y0V0aFE9PSIsIlRva2VuSUQiOiJkYjhiYTc2Ni04ZTcxLTRiY2MtYTdhNy02ZDhiYzRiN2NhNmIiLCJpYXQiOjE1OTU1NzI2MDR9.Y91tP5RYq6mQY-CF6RSgey6hLz_abk2S667TROpCu2o</p>
</blockquote>
<p>通过<strong>编码后的 header</strong> 和<strong>编码的后的 payload</strong> 再加上一个<strong>密钥</strong>就可以进行签名</p>
<p>签名用于认证过程中判断 JWT 有没有被篡改，验证 JWT 的合法性。</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="../assets/jwt.png" alt="jwt 示例" class="lazyload"></p>
<h2 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h2><p>互联网服务离不开各种用户认证，一般cookie-session流程如下:</p>
<p>1.用户通过账号密码登录、浏览器向服务器发送用户名和密码<br>2.服务器验证通过后，在当前对话（session）里面保存相关数据，比如用户角色、登录时间等等<br>3.服务器向用户返回一个 session_id，写入用户的 Cookie<br>4.用户随后的每一次请求，都会通过 Cookie，将 session_id 传回服务器<br>5.服务器收到 session_id，找到前期保存的数据，由此得知用户的身份  </p>
<p>session-cookie 的认证方式存在以下的几个缺点：  </p>
<ul>
<li>如果使用服务集群、需要考虑共享 session、 session 复制问题</li>
<li>session 存储用户信息会占用大量服务器内存、增加服务器的开销</li>
<li>cookie 存在跨域的问题</li>
<li>用户容易受到 CSRF 攻击</li>
</ul>
<h2 id="JWT-原理"><a href="#JWT-原理" class="headerlink" title="JWT 原理"></a>JWT 原理</h2><p>JSON Web Token 认证流程如下：  </p>
<ul>
<li>用户客户端通过账号和密码登录、浏览器向服务器发起登录请求 </li>
<li>服务器验证用户账号密码</li>
<li>应用提供一个 token 给客户端 </li>
<li>客户端存储 token，并且在随后的每一次请求的 header: Authorization 中都带着它 (如果是放在cookie携带去请求服务端就不能跨域) </li>
<li>服务器校验 token 合法性以及是否过期，并返回数据</li>
</ul>
<p>如此服务器成了无状态的了，更加的易于扩展服务</p>
<p>JWT 与 cookie-session机制的一个不同就是 session 是存在服务端，而 JWT 最大的特点就是把状态存在客户端。</p>
<p>个人认为jwt解决最大的问题不是跨域，而是前后端分离后，纯接口方面的用户认证问题。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html">JSON Web Token 入门教程</a></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/07/21/TypeScript/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="TypeScript 笔记" class="lazyload">
                    <h1>TypeScript 笔记</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年07月21日</a>
            <a><i class="nexmoefont icon-areachart"></i>426 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 2 分钟</a>
        </div>

        <article>
            
                <h2 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h2><p>常用于对 「对象形状」进行描述</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 接口首字母一般大写 或者加上 I 前缀</span><br>interface Person &#123;<br>  <span class="hljs-attr">name</span>: string;<br>  age?: number;<br>&#125;<br><br><span class="hljs-comment">// 变量形状必须与接口形状一致，不多不少</span><br><span class="hljs-keyword">let</span> tom: Person = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;tom&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">1</span><br>&#125;;<br><br></code></pre></td></tr></table></figure>

<h2 id="类型别名（type）"><a href="#类型别名（type）" class="headerlink" title="类型别名（type）"></a>类型别名（type）</h2><p>类型别名为类型创建新名称。<br>类型别名有时与接口相似，但是可以命名基元，并集，元组和其他必须手工编写的其他类型。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Name = <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">type</span> StringOrNumber = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">type</span> ActionResponse = <span class="hljs-built_in">Promise</span>&lt;&#123; error?; data? &#125;&gt;;<br><br><span class="hljs-keyword">type</span> childItem = &#123;<br>    id?: <span class="hljs-built_in">number</span>;<br>    label: <span class="hljs-built_in">string</span>;<br>    key?: <span class="hljs-built_in">string</span>;<br>    info?: &#123;<br>        <span class="hljs-attr">price</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;<br>        specialPrices?: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;<br>    &#125;;<br>&#125;;<br><br><span class="hljs-keyword">type</span> menuItem = &#123;<br>    <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>;<br>    key: <span class="hljs-built_in">string</span>;<br>    children: <span class="hljs-built_in">Array</span>&lt;childItem&gt;;<br>&#125;;<br></code></pre></td></tr></table></figure>


<h3 id="interface-和-type-的区别"><a href="#interface-和-type-的区别" class="headerlink" title="interface 和 type 的区别"></a>interface 和 type 的区别</h3><ul>
<li>语法区别</li>
<li>interface 支持同名合并、type 不支持</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5c2723635188252d1d34dc7d">参考文档</a></p>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><p>将可枚举的值定义为枚举类型 通常为一些常量<br>枚举成员会被赋值为从 0 开始递增的数字，同时也会对枚举值到枚举名进行反向映射</p>
<ul>
<li>普通枚举<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">enum Days &#123;<br>  Sun,<br>  Mon,<br>  Tue,<br>  Wed,<br>  Thu,<br>  Fri,<br>  Sat<br>&#125;<br><br><span class="hljs-built_in">console</span>.log(Days[<span class="hljs-number">5</span>]); <span class="hljs-comment">// Fri</span><br><span class="hljs-built_in">console</span>.log(Days[<span class="hljs-string">&quot;Sat&quot;</span>]); <span class="hljs-comment">// 6</span><br><br><span class="hljs-comment">// 编译后结果</span><br><span class="hljs-keyword">var</span> Days;<br>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Days</span>) </span>&#123;<br>    Days[Days[<span class="hljs-string">&quot;Sun&quot;</span>] = <span class="hljs-number">0</span>] = <span class="hljs-string">&quot;Sun&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Mon&quot;</span>] = <span class="hljs-number">1</span>] = <span class="hljs-string">&quot;Mon&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Tue&quot;</span>] = <span class="hljs-number">2</span>] = <span class="hljs-string">&quot;Tue&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Wed&quot;</span>] = <span class="hljs-number">3</span>] = <span class="hljs-string">&quot;Wed&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Thu&quot;</span>] = <span class="hljs-number">4</span>] = <span class="hljs-string">&quot;Thu&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Fri&quot;</span>] = <span class="hljs-number">5</span>] = <span class="hljs-string">&quot;Fri&quot;</span>;<br>    Days[Days[<span class="hljs-string">&quot;Sat&quot;</span>] = <span class="hljs-number">6</span>] = <span class="hljs-string">&quot;Sat&quot;</span>;<br>&#125;)(Days || (Days = &#123;&#125;));<br></code></pre></td></tr></table></figure>
— 常量枚举</li>
</ul>
<p>常量枚举在编译阶段会被删除，并且不能包含计算成员</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> enum Directions &#123;<br>  UP, Down, Left, Right<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="interface-和-class-的区别"><a href="#interface-和-class-的区别" class="headerlink" title="interface 和 class 的区别"></a>interface 和 class 的区别</h3><p>类可以被实例化、可以实现接口  </p>
<p>接口可以被实现、扩展，但是不能被实例化</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/06/05/interview/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="前端面试相关" class="lazyload">
                    <h1>前端面试相关</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年06月05日</a>
            <a><i class="nexmoefont icon-areachart"></i>134 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <ul>
<li><a href="./EventLoop.md">时间模型与事件循环</a></li>
</ul>
<p><strong>!!</strong></p>
<p>const address = !!corpInfo || corpInfo.address;</p>
<p>如果要显式地将返回值（或者表达式）转换为布尔值，请使用双重非运算符（即!!）或者Boolean构造函数。</p>
<p>!! 相当于进行了两次取反, 使其他类型转换成 bool 类型。<br>!! 两个叹号使 !!corpInfo 的值为 bool 类型，如果没有明确变量 corpInfo （非null/undifined/0/“”等值），!!corpInfo 即为 true, 明确了变量的值的话  !!corpInfo 为 true。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">!<span class="hljs-literal">null</span> <span class="hljs-comment">// true</span><br>!<span class="hljs-literal">undefined</span> <span class="hljs-comment">// true</span><br>!<span class="hljs-number">0</span> <span class="hljs-comment">// true</span><br>!<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// true</span><br><br>!!<span class="hljs-literal">null</span> <span class="hljs-comment">// false</span><br>!!<span class="hljs-literal">undefined</span> <span class="hljs-comment">// false</span><br>!!<span class="hljs-number">0</span> <span class="hljs-comment">// false</span><br>!!<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/06/05/EventLoop/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="EventLoop(js 事件循环机制)" class="lazyload">
                    <h1>EventLoop(js 事件循环机制)</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年06月05日</a>
            <a><i class="nexmoefont icon-areachart"></i>25 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <h2 id="事件循环机制"><a href="#事件循环机制" class="headerlink" title="事件循环机制"></a>事件循环机制</h2><p>浏览器端 和 Node 的事件循环</p>
<h2 id="宏任务-amp-amp-微任务"><a href="#宏任务-amp-amp-微任务" class="headerlink" title="宏任务 &amp;&amp; 微任务"></a>宏任务 &amp;&amp; 微任务</h2>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/06/05/jsonp/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="jsonp" class="lazyload">
                    <h1>jsonp</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年06月05日</a>
            <a><i class="nexmoefont icon-areachart"></i>12 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <h2 id="跨域问题处理"><a href="#跨域问题处理" class="headerlink" title="跨域问题处理"></a>跨域问题处理</h2><!-- TODO -->
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonp</span>(<span class="hljs-params">url, callback</span>) </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/06/05/sliderUnlock/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="sliderUnlock(iPhone 滑动解锁样式效果)" class="lazyload">
                    <h1>sliderUnlock(iPhone 滑动解锁样式效果)</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年06月05日</a>
            <a><i class="nexmoefont icon-areachart"></i>788 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
        </div>

        <article>
            
                <h2 id="相关属性"><a href="#相关属性" class="headerlink" title="相关属性"></a>相关属性</h2><h3 id="linear-gradient"><a href="#linear-gradient" class="headerlink" title="linear-gradient()"></a>linear-gradient()</h3><blockquote>
<p>背景渐变样式、属于一种特殊的 <image> 数据类型，一般适用于 image 可以使用的地方，并不适用于background-color, 而是 background-image</p>
</blockquote>
<p>用法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 指定渐变轴的角度 */</span><br>linear-gradient(<span class="hljs-number">30deg</span>, red, blue);<br></code></pre></td></tr></table></figure>
<div style="height: 80px; width: 80px;background-image: linear-gradient(30deg, red, blue);"></div>

<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 直接指定渐变的方向 以及颜色范围 */</span><br><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, blue <span class="hljs-number">60%</span>, green);<br></code></pre></td></tr></table></figure>
<div style="height: 80px; width: 80px;background-image: linear-gradient(to bottom, blue 60%, green);"></div>

<p>linear-gradient 的渐变彩虹效果（更精细的控制）:  </p>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, red <span class="hljs-number">14.28%</span>, orange <span class="hljs-number">28.5%</span>, yellow <span class="hljs-number">42.8%</span>, green <span class="hljs-number">57.1%</span>, blue <span class="hljs-number">71.4%</span>, indigo <span class="hljs-number">85.7%</span>, purple);<br></code></pre></td></tr></table></figure>
<div style="height: 80px;background-image: linear-gradient(to bottom, red 14.28%, orange 28.5%, yellow 42.8%, green 57.1%, blue 71.4%, indigo 85.7%, purple);"></div>

<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(to right, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>) <span class="hljs-number">40%</span>, <span class="hljs-number">#fff</span> <span class="hljs-number">50%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>) <span class="hljs-number">60%</span>);<br></code></pre></td></tr></table></figure>
<div style="height: 80px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0.6) 40%, #fff 50%, rgba(0, 0, 0, 0.6) 60%);"></div>

<h3 id="background-blend-mode"><a href="#background-blend-mode" class="headerlink" title="background-blend-mode"></a>background-blend-mode</h3><blockquote>
<p>定义元素的背景图片、以及背景色如何混合</p>
</blockquote>
<h2 id="background-clip"><a href="#background-clip" class="headerlink" title="background-clip"></a>background-clip</h2><blockquote>
<p>设置元素的背景（背景图片或颜色）是否延伸到边框、内边距盒子、内容盒子下面。</p>
</blockquote>
<table>
<thead>
<tr>
<th>属性</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>border-box</td>
<td>背景色（或图片）延伸到边框（存在边框的时需要将边框设置为虚线（非 soild）或者设置透明度）</td>
</tr>
<tr>
<td>padding-box</td>
<td>背景色（或图片）延伸至 padding 区域展示、不到边框</td>
</tr>
<tr>
<td>content-box</td>
<td>背景色（或图片）只在 content 区域展示</td>
</tr>
<tr>
<td>text</td>
<td>背景色（或图片）裁剪成文字前景色、即背景色透上来, 文字需要设置透明度</td>
</tr>
</tbody></table>
<h3 id="background-size"><a href="#background-size" class="headerlink" title="background-size"></a>background-size</h3><blockquote>
<p>设置背景图片的大小 可拉伸可按比例缩放</p>
</blockquote>
<table>
<thead>
<tr>
<th>属性</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>contain</td>
<td>缩放背景图片以完全装入背景区，填充所在区域，图片太小会通过repeat的形式填满、不需要repeat可以指定 background-repeat:no-repeat</td>
</tr>
<tr>
<td>cover</td>
<td>缩放背景图片以完全覆盖背景，保持宽高比缩放，可能图片部分看不见区</td>
</tr>
<tr>
<td>percentage</td>
<td>图片相对背景区的百分比</td>
</tr>
<tr>
<td>width height</td>
<td>指定宽高，按指定大小渲染；只传一个值为宽度，不传height默认 auto</td>
</tr>
</tbody></table>
<h3 id="background-image"><a href="#background-image" class="headerlink" title="background-image"></a>background-image</h3><blockquote>
<p>背景图片的展示</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">png1.png</span>), <span class="hljs-built_in">url</span>(<span class="hljs-string">png2.png</span>), <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>));<br></code></pre></td></tr></table></figure>
<p>在绘制时，图像以 z 方向堆叠的方式进行。先指定的图像会在之后指定的图像上面绘制。因此指定的第一个图像“最接近用户”。</p>
<p>然后元素的边框 border 会在它们之上被绘制，而 background-color 会在它们之下绘制。</p>
<h3 id="background-blend-mode-1"><a href="#background-blend-mode-1" class="headerlink" title="background-blend-mode"></a>background-blend-mode</h3><blockquote>
<p>定义该元素的背景、以及背景元素该如何混合, 混合模式应该按background-image CSS属性同样的顺序定义, 如果混合模式数量与背景图像的数量不相等，它会被截取至相等的数量。    </p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 单值 */</span><br><span class="hljs-attribute">background</span>-blend-mode: normal; // 最终颜色永远是顶层颜色、类似两张不透明的纸重叠在一起<br><span class="hljs-attribute">background</span>-blend-mode: hard-light; // 效果类似于在背景层上用前景层打出一片刺眼的聚光灯 滑动解锁文字效果<br><span class="hljs-attribute">background</span>-blend-mode: soft-light; // 效果类似于在背景层上用前景层打出一片发散的聚光灯 滑动解锁文字效果<br><br><span class="hljs-comment">/* 双值，每个背景一个值 */</span><br><span class="hljs-attribute">background</span>-blend-mode: darken, luminosity;<br><br><span class="hljs-attribute">background</span>-blend-mode: initial;<br><span class="hljs-attribute">background</span>-blend-mode: inherit;<br><span class="hljs-attribute">background</span>-blend-mode: unset;<br></code></pre></td></tr></table></figure>
<p>[blend-mode取值类型参考文档]（<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/blend-mode%EF%BC%89">https://developer.mozilla.org/zh-CN/docs/Web/CSS/blend-mode）</a></p>
<iframe
     src="https://codesandbox.io/embed/huadongjiesuo-1dpwg?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="滑动解锁"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

<h2 id="参考文档-amp-amp-链接"><a href="#参考文档-amp-amp-链接" class="headerlink" title="参考文档 &amp;&amp; 链接"></a>参考文档 &amp;&amp; 链接</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/linear-gradient">linear-gradient</a><br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-blend-mode">background-blend-mode</a></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/06/01/redux/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="redux 笔记" class="lazyload">
                    <h1>redux 笔记</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年06月01日</a>
            <a><i class="nexmoefont icon-areachart"></i>1k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 5 分钟</a>
        </div>

        <article>
            
                <h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>Action 本质是 JS 对象，是把数据从应用传到 store 的唯一来源， 一般通过 store.dispatch(action) 将 action 传到 store。action 只是描述有事情发生</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> ADD_TODO = <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>;<br><br>&#123;<br>  <span class="hljs-attr">type</span>: ADD_TODO,<br>  <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Build my first Redux app&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>action 内必须使用一个字符串类型的 type 字段来表示将要执行的动作（通常为常量）  </li>
<li>当 action 过多的时候，使用单独的文件进行管理 actionTypes</li>
</ul>
<h3 id="action-创建函数"><a href="#action-创建函数" class="headerlink" title="action 创建函数"></a>action 创建函数</h3><p>Action 创建函数 就是生成 action 的方法。“action” 和 “action 创建函数” 这两个概念很容易混在一起，使用时最好注意区分。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> ADD_TODO = <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTodo</span>(<span class="hljs-params">text</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">type</span>: ADD_TODO,<br>    text<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这样做将使 action 创建函数更容易被移植和测试  </p>
<p>Redux 中只需把 action 创建函数的结果传给 dispatch() 方法即可发起一次 dispatch 过程。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">dispatch(addTodo(text));<br></code></pre></td></tr></table></figure>
<p>store 里能直接通过 store.dispatch() 调用 dispatch() 方法，但是多数情况下你会使用 react-redux 提供的 connect() 帮助器来调用。<br>使用 connect() 前，需要先定义 mapStateToProps 这个函数来 <strong>指定如何把当前 Redux store state 映射到展示组件的 props 中</strong>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> (&#123;<br>    <span class="hljs-attr">text</span>: state.text,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(mapStateToProps)(DemoComponent);<br></code></pre></td></tr></table></figure>

<p>除了 state，还可以分发 dispatch </p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-keyword">import</span> &#123; toggleTodo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../actions&#x27;</span><br><span class="hljs-keyword">import</span> TodoList <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/TodoList&#x27;</span><br><br><span class="hljs-keyword">const</span> getVisibleTodos = <span class="hljs-function">(<span class="hljs-params">todos, filter</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (filter) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_ALL&#x27;</span>:<br>      <span class="hljs-keyword">return</span> todos<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_COMPLETED&#x27;</span>:<br>      <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.completed)<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_ACTIVE&#x27;</span>:<br>      <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> !t.completed)<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">todos</span>: getVisibleTodos(state.todos, state.visibilityFilter)<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> mapDispatchToProps = <span class="hljs-function"><span class="hljs-params">dispatch</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">onTodoClick</span>: <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> &#123;<br>      dispatch(toggleTodo(id))<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> VisibleTodoList = connect(<br>  mapStateToProps,<br>  mapDispatchToProps<br>)(TodoList)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> VisibleTodoList<br></code></pre></td></tr></table></figure>

<h2 id="异步-Action"><a href="#异步-Action" class="headerlink" title="异步 Action"></a>异步 Action</h2><!-- TODO -->

<h2 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h2><p>Reducers 指定了应用状态的变化如何响应 actions 并发送到 store 的，描述如何更新 state。</p>
<p>Reducer 是纯函数，它不应做有副作用的操作，如 API 调用或路由跳转。这些应该在 dispatch action 前发生</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;<br>  ADD_TODO,<br>  TOGGLE_TODO,<br>  SET_VISIBILITY_FILTER,<br>  VisibilityFilters<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./actionTypes&#x27;</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">todoApp</span>(<span class="hljs-params">state = initialState, action</span>) </span>&#123;<br>  <span class="hljs-keyword">switch</span> (action.type) &#123;<br>    <span class="hljs-keyword">case</span> SET_VISIBILITY_FILTER:<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.assign(&#123;&#125;, state, &#123;<br>        <span class="hljs-attr">visibilityFilter</span>: action.filter<br>      &#125;)<br>    <span class="hljs-keyword">case</span> ADD_TODO:<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.assign(&#123;&#125;, state, &#123;<br>        <span class="hljs-attr">todos</span>: [<br>          ...state.todos,<br>          &#123;<br>            <span class="hljs-attr">text</span>: action.text,<br>            <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span><br>          &#125;<br>        ]<br>      &#125;)<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Object</span>.assign(state, &#123;<span class="hljs-attr">visibilityFilter</span>: action.filter&#125;) <span class="hljs-comment">// ❌</span><br><span class="hljs-built_in">Object</span>.assign(&#123;&#125;, state, &#123;<span class="hljs-attr">visibilityFilter</span>: action.filter&#125;) <br></code></pre></td></tr></table></figure>
<ul>
<li>不要修改 state， object()将第一个参数设为空对象，第一种会修改 state 的值  </li>
<li>object.assign() 是 ES6 新特性，存在兼容性问题，要么使用 @babel/polyfill babel 插件，要么使用其他库 _assign()  </li>
<li>在 default 情况下返回旧的 state。遇到未知的 action 时，一定要返回旧的 state</li>
</ul>
<p>reducer 拆分： 可以将数据和单纯 UI 控制相关进行拆分</p>
<p>通过 combineReducers() 将拆分的 reducers 进行 合并</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span><br><br><span class="hljs-keyword">const</span> todoApp = combineReducers(&#123;<br>  visibilityFilter,<br>  todos<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> todoApp<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">todoApp</span>(<span class="hljs-params">state = &#123;&#125;, action</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">visibilityFilter</span>: visibilityFilter(state.visibilityFilter, action),<br>    <span class="hljs-attr">todos</span>: todos(state.todos, action)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>两种方法等价</p>
<h2 id="store"><a href="#store" class="headerlink" title="store"></a>store</h2><p>store 是将 action 和 reducer 二者联系起来的对象<br>再次强调一下 Redux 应用只有一个单一的 store。当需要拆分数据处理逻辑时，你应该使用 reducer 组合 而不是创建多个 store</p>
<p>通过 redux 提供的 createStore() 方法根据已有的 reducer 来创建 store, 可以通过第二个参数提供 initState 初始化应用</p>
<blockquote>
<p>const store = createStore(reducers, [initState])</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span><br><span class="hljs-keyword">import</span> todoApp <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reducers&#x27;</span><br><span class="hljs-keyword">let</span> store = createStore(todoApp)<br></code></pre></td></tr></table></figure>
<p>store的职责：<br>-维持应用的 state；</p>
<ul>
<li>提供 getState() 方法获取 state</li>
<li>提供 dispatch(action) 方法更新 state</li>
<li>通过 subscribe(listener) 注册监听器</li>
<li>通过 subscribe(listener) 返回的函数注销监听器</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;<br>  addTodo,<br>  toggleTodo,<br>  setVisibilityFilter,<br>  VisibilityFilters<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./actions&#x27;</span><br><br><span class="hljs-comment">// 打印初始状态</span><br><span class="hljs-built_in">console</span>.log(store.getState())<br><br><span class="hljs-comment">// 每次 state 更新时，打印日志</span><br><span class="hljs-comment">// 注意 subscribe() 返回一个函数用来注销监听器</span><br><span class="hljs-keyword">const</span> unsubscribe = store.subscribe(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(store.getState()))<br><br><span class="hljs-comment">// 发起一系列 action</span><br>store.dispatch(addTodo(<span class="hljs-string">&#x27;Learn about actions&#x27;</span>))<br>store.dispatch(addTodo(<span class="hljs-string">&#x27;Learn about reducers&#x27;</span>))<br>store.dispatch(addTodo(<span class="hljs-string">&#x27;Learn about store&#x27;</span>))<br>store.dispatch(toggleTodo(<span class="hljs-number">0</span>))<br>store.dispatch(toggleTodo(<span class="hljs-number">1</span>))<br>store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_COMPLETED))<br><br><span class="hljs-comment">// 停止监听 state 更新</span><br>unsubscribe()<br></code></pre></td></tr></table></figure>

<h2 id="严格的单向数据流"><a href="#严格的单向数据流" class="headerlink" title="严格的单向数据流"></a>严格的单向数据流</h2>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/05/29/babel7/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="babel7 配置" class="lazyload">
                    <h1>babel7 配置</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年05月29日</a>
            <a><i class="nexmoefont icon-areachart"></i>994 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
        </div>

        <article>
            
                <h2 id="babel-JS-编译器"><a href="#babel-JS-编译器" class="headerlink" title="babel, JS 编译器"></a>babel, JS 编译器</h2><p>Babel 是一个工具链，主要用于将 ECMAScript 2015+ （又可称为ES6，ES7，ES8等）版本的代码转换为向后兼容的 JavaScript 语法，以便旧版本浏览器或其他环境中运行代码</p>
<p>从 babel7 开始，所有的官方插件和主要模块，都放在了 @babel 的命名空间下。从而可以避免在 npm 仓库中 babel 相关名称被抢注的问题。<br>如：<br>babel-cli babel 6<br>@babel/cli babel 7  </p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>想要通过 <code>babel</code> 编译出兼容的代码、需要配合插件对源码进行语法和 <code>API</code> 转换处理</p>
<p><strong>插件在 <code>presets</code> 前执行，多个插件从前往后顺序执行</strong>，插件配置：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;plugins&quot;</span>: [<br>    [<br>      <span class="hljs-string">&quot;@babel/plugin-transform-runtime&quot;</span><br>    ]<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="babel-plugin-transform-runtime"><a href="#babel-plugin-transform-runtime" class="headerlink" title="@babel/plugin-transform-runtime"></a>@babel/plugin-transform-runtime</h3><blockquote>
<p>@babel/plugin-transform-runtime 可以重复使用babel注入的帮助程序、避免代码的多次注入，节省代码体积</p>
</blockquote>
<p>主要作用：  </p>
<ul>
<li>自动转换generators/async  </li>
<li>使用 core-js 按需给内置类型打上 polyfill, 和下面 presets配置重的 useBuiltIns: ‘usage’ 作用一样</li>
<li>通过 helpers 选项自动移除嵌入的babel helper,并且用module引用来代替。否则每个文件中都会加入这些inline babel helper,造成代码冗余。默认为ture。  </li>
</ul>
<p><code>@babel/plugin-transform-runtime</code> 需要依赖 <code>@babel/runtime</code>，二者配合使用  </p>
<p><code>@babel/runtime</code> 作为运行时需要作为生产依赖进行安装，而<code>@babel/plugin-transform-runtime</code>作为开发依赖使用</p>
<p>对如下代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br><br>&#125;<br><br><span class="hljs-comment">// 不使用用 @babel/plugin-transform-runtime 经过`babel` 编译后的文件内容为  </span><br><span class="hljs-meta">&quot;use strict&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) </span>&#123; <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> Constructor)) &#123; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>); &#125; &#125;<br><br><span class="hljs-keyword">var</span> Person = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>) </span>&#123;<br>  _classCallCheck(<span class="hljs-built_in">this</span>, Person);<br>&#125;;<br></code></pre></td></tr></table></figure>
<p>可以看到在编译后的文件内 生成了 _classCallCheck() 模块、在项目中经常会在多个地方使用到 class 去创建类，那么在每一个文件内顶部都会生成 _classCallCheck() 模块，会极大的增加代码的体积。通过 @babel/plugin-transform-runtime 编译生成的代码文件如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-meta">&quot;use strict&quot;</span>;<br><br><span class="hljs-keyword">var</span> _interopRequireDefault = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@babel/runtime/helpers/interopRequireDefault&quot;</span>);<br><br><span class="hljs-keyword">var</span> _classCallCheck2 = _interopRequireDefault(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@babel/runtime/helpers/classCallCheck&quot;</span>));<br><br><span class="hljs-keyword">var</span> Person = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>) </span>&#123;<br>  (<span class="hljs-number">0</span>, _classCallCheck2.default)(<span class="hljs-built_in">this</span>, Person);<br>&#125;;<br></code></pre></td></tr></table></figure>
<p>在文件顶部没有直接注入之前的整个 function 模块、而是在 helpers 目录下生成模块，在编译转换需要的地方通过 require 引入。</p>
<h2 id="presets"><a href="#presets" class="headerlink" title="presets"></a>presets</h2><p><code>preset</code> 是 <code>babel</code> 提供的插件组合（一组插件）</p>
<p><code>presets</code> 配置 使用数组，第一个表示 <code>preset</code> 名字，第二个表示配置参数， 如下：    </p>
<figure class="highlight json"><table><tr><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;presets&quot;</span>: [<br>      [<br>          <span class="hljs-string">&quot;@babel/preset-env&quot;</span>,<br>          &#123;<br>              <span class="hljs-attr">&quot;targets&quot;</span>: &#123;  <span class="hljs-comment">// 配置目标环境，优化编译生成代码体积</span><br>                  <span class="hljs-attr">&quot;browsers&quot;</span>: [<br>                      <span class="hljs-string">&quot;&gt; 1%&quot;</span>,<br>                      <span class="hljs-string">&quot;last 2 versions&quot;</span><br>                  ]<br>              &#125;,<br>              <span class="hljs-attr">&quot;useBuiltIns&quot;</span>: <span class="hljs-string">&quot;usage&quot;</span>, <span class="hljs-comment">// 按需加载</span><br>              <span class="hljs-attr">&quot;corejs&quot;</span>: <span class="hljs-number">3</span><br>          &#125;<br>      ],<br>      <span class="hljs-string">&quot;@babel/preset-react&quot;</span><br>  ]<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>注意：<code>presets</code> 的执行顺序是由后往前的</strong> 如上先执行 <code>@babel/preset-react</code> 再执行 <code>@babel/preset-env</code>  </p>
<h3 id="preset-env"><a href="#preset-env" class="headerlink" title="preset-env"></a>preset-env</h3><p>将高级语法转换成低版本的写法  </p>
<p><code>@babel/preset-env</code> 会根据你配置的目标环境，生成插件列表来编译。对于基于浏览器或 <code>Electron</code> 的项目，官方推荐使用 .browserslistrc 文件来指定目标环境<br>一般通过 package.json 中 browserlist 字段配置如：  </p>
<figure class="highlight json"><table><tr><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;browserslist&quot;</span>: [<br>  <span class="hljs-string">&quot;&gt; 0.5%&quot;</span>, <span class="hljs-comment">// 市场份额</span><br>  <span class="hljs-string">&quot;last 2 versions&quot;</span>  <span class="hljs-comment">// 最近两个版本</span><br>],<br></code></pre></td></tr></table></figure>
<p><del>那这个配置与babelrc中的target配置有啥联系吗？？</del><br>尽量指定目标环境，保持编译代码体积最小</p>
<h2 id="主要模块"><a href="#主要模块" class="headerlink" title="主要模块"></a>主要模块</h2><h3 id="babel-core-babel-核心"><a href="#babel-core-babel-核心" class="headerlink" title="@babel/core babel 核心"></a>@babel/core babel 核心</h3><p>包含 <code>babel</code> 的核心功能</p>
<h3 id="babel-polyfill"><a href="#babel-polyfill" class="headerlink" title="@babel/polyfill"></a>@babel/polyfill</h3><blockquote>
<p><strong>V7.4.0</strong> 版本开始，<code>@babel/polyfill</code> 被<strong>废弃</strong>，不建议使用 <code>polyfill</code> 了，需单独安装 <code>core-js</code> 和 <code>regenerator-runtime</code> 模块  </p>
</blockquote>
<p>babel 几乎可以编译所有最新的 Javascript 语法，但对于 API 来说确并非如此</p>
<p>里面包含 core-js</p>
<h3 id="core-js"><a href="#core-js" class="headerlink" title="core-js"></a><a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js">core-js</a></h3><ul>
<li><code>core-js</code> 是 <code>JavaScript</code> 标准库的 <code>polyfill</code></li>
<li>core-js和 babel 高度集成，可以对 core-js的引入进行最大程度的优化</li>
</ul>
<h2 id="参考文档-amp-amp-链接"><a href="#参考文档-amp-amp-链接" class="headerlink" title="参考文档 &amp;&amp; 链接"></a>参考文档 &amp;&amp; 链接</h2><h4 id="关于-browsersList-配置"><a href="#关于-browsersList-配置" class="headerlink" title="关于 browsersList 配置"></a><a href="./browserslist.md">关于 browsersList 配置</a></h4><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sefaultment/p/11631314.html">core-js@3 博客园</a></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/05/22/CSS-Pseudo-Selectors/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="CSS 伪选择器(CSS_Pseudo-Selectors)" class="lazyload">
                    <h1>CSS 伪选择器(CSS_Pseudo-Selectors)</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年05月22日</a>
            <a><i class="nexmoefont icon-areachart"></i>792 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
        </div>

        <article>
            
                <blockquote>
<p>选择器权重： 0级只没有优先级，1级是标签选择器，10级是累选择器、属性选择器，100级是 ID 选择器</p>
</blockquote>
<h2 id="伪类"><a href="#伪类" class="headerlink" title="伪类"></a>伪类</h2><!-- TODO 翻一下原来的笔记补充一下 -->
<p>伪类优先级和类选择器一致，都是10</p>
<p>逻辑伪类 | 作用<br>:not() | 取反（反选伪类）<br>:is() | 判断<br>:where() | 条件</p>
<p>但是对于逻辑伪类来说，优先级为0，例如： :not(), :is(), :where() 等</p>
<p>逻辑伪类的优先级由括号里面的选择器决定，支持多个选择器通过逗号隔开，不支持及联选择器</p>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.disabled</span>) &#123;&#125;    <span class="hljs-comment">/* 优先级等同于.disabled选择器 */</span><br><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-tag">a</span>) &#123;&#125;    <span class="hljs-comment">/* 优先级等同于a选择器 */</span><br><span class="hljs-comment">/* 既不是 div 也不是 span 的元素 */</span><br><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-tag">div</span>, <span class="hljs-selector-tag">span</span>) &#123;&#125; <br><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.disabled</span>) &#123;&#125;    <span class="hljs-comment">/* 无效，不支持 */</span><br><span class="hljs-comment">/* 需要拆开写 */</span><br><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-tag">a</span>)<span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.disabled</span>) &#123;&#125;<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>状态伪类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:link</td>
<td>未访问过的超链接</td>
</tr>
<tr>
<td>:visited</td>
<td>访问过的超链接</td>
</tr>
<tr>
<td>:hover</td>
<td>鼠标悬停的元素</td>
</tr>
<tr>
<td>:actived</td>
<td>选取点中的元素</td>
</tr>
<tr>
<td>:focus</td>
<td>获得焦点的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>筛选伪类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:first-child</td>
<td>当前选择器下第一个元素</td>
</tr>
<tr>
<td>:last-child</td>
<td>当前选择器下最后一个元素</td>
</tr>
<tr>
<td>:nth-child(n)</td>
<td>选取第n个，:nth-child(2n + 1) 奇数位</td>
</tr>
<tr>
<td>:checked</td>
<td>只对 radio 和 checkbox 有效，选取当前选中的元素</td>
</tr>
<tr>
<td>:disabled</td>
<td>选取禁用的表单元素</td>
</tr>
<tr>
<td>:only-child</td>
<td>选取唯一子元素。如果一个元素的父元素只有它一个子元素，这个伪类就会生效。如果一个元素还有兄弟元素，这个伪类就不会对它生效。</td>
</tr>
</tbody></table>
<h2 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h2><p>伪元素的权重和标签选择器权重相同，为 1<br> 常用的伪元素：<br>::after，::before :，<br>其中 content 默认是行内元素</p>
<table>
<thead>
<tr>
<th>伪元素</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>::before</td>
<td>在某个元素之前插入一些内容</td>
</tr>
<tr>
<td>::after</td>
<td>在某个元素之后插入一些内容</td>
</tr>
<tr>
<td>::first-line</td>
<td>为某个元素的第一行文字使用样式</td>
</tr>
<tr>
<td>::first-letter</td>
<td>为某个元素中的文字的首字母或第一个字使用样式</td>
</tr>
<tr>
<td>::selection</td>
<td>对光标选中的元素添加样式。</td>
</tr>
</tbody></table>
<p><a href="./beforeAfter.md">:after + data-descr 实现tooltip效果</a></p>
<ul>
<li>不能通过 js 去操作伪元素生成的内容，因为伪元素构造的元素是虚拟的。</li>
<li>first-line 和 first-letter 不适用于内联元素，在内联元素中这两个选择器都会失效。</li>
<li>除了 selection，其余四个伪元素选择器已经在 CSS2 中存在且和伪类用的是一样的单冒号表示的。为了向下兼容，现在的浏览器中伪元素选择器用单冒号和双冒号都可以。</li>
</ul>
<h3 id="伪类与伪元素的区别"><a href="#伪类与伪元素的区别" class="headerlink" title="伪类与伪元素的区别"></a>伪类与伪元素的区别</h3><p>伪类的效果可以通过添加一个实际的类来达到，而伪元素的效果则需要通过添加一个实际的元素才能达到，这也是为什么他们一个称为伪类，一个称为伪元素的原因。<br>伪元素和伪类之所以这么容易混淆，是因为他们的效果类似而且写法相仿，但实际上 css3 为了区分两者，已经明确规定了伪类用一个冒号来表示，而伪元素则用两个冒号来表示。</p>
<p><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/css-pseudo-selectors-you-never-knew-existed-b5c0ddaa8116">sdfas</a></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/05/19/react-a11y/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="a11y 无障碍辅助功能" class="lazyload">
                    <h1>a11y 无障碍辅助功能</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年05月19日</a>
            <a><i class="nexmoefont icon-areachart"></i>20 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <p>语义化的 HTML 是无障碍辅助功能网络应用的基础。</p>

            
        </article>
    </div>
    
</section>

    <nav class="nexmoe-page-nav">
        <a class="extend prev" rel="prev" href="/archives/2020/"><i class="nexmoefont icon-left"></i></a><a class="page-number" href="/archives/2020/">1</a><span class="page-number current">2</span><a class="page-number" href="/archives/2020/page/3/">3</a><a class="extend next" rel="next" href="/archives/2020/page/3/"><i class="nexmoefont icon-right"></i></a>
    </nav>
  
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1629897075420"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?1b3ede68905f0bbb58c39b0e279d6246';
    var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

</html>
